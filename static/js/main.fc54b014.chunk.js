(this.webpackJsonpweather_app=this.webpackJsonpweather_app||[]).push([[0],{11:function(e,t,n){},19:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(12),s=n(1),i=n.n(s),o=n(5),l=n(3),h=n(4),u=n(7),d=n(6),j=(n(11),n(19),n(0)),p=function(e){var t=new Date;return Object(j.jsxs)("div",{className:"main",children:[Object(j.jsx)("div",{className:"form-container",children:e.children}),Object(j.jsxs)("div",{className:"main-content",children:[Object(j.jsxs)("div",{className:"temp",children:[Object(j.jsxs)("div",{className:"temp__main",children:[Object(j.jsxs)("div",{children:[e.data.temp," C"]}),Object(j.jsx)("div",{children:Object(j.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(e.data.icon,"@2x.png"),alt:""})})]}),Object(j.jsx)("div",{className:"temp__feel",children:Object(j.jsxs)("p",{children:["feels like: ",e.data.feels_like," C"]})}),Object(j.jsx)("div",{className:"wind__main",children:Object(j.jsxs)("p",{children:["wind: ",e.data.wind.speed," \u043c/c"]})}),Object(j.jsx)("div",{className:"humidity",children:Object(j.jsxs)("p",{children:["humidity: ",e.data.humidity,"%"]})})]}),Object(j.jsxs)("div",{className:"weather",children:[Object(j.jsxs)("div",{className:"weather__location",children:[Object(j.jsx)("h2",{children:"city:\xa0 "}),Object(j.jsx)("h2",{children:e.data.city})]}),Object(j.jsxs)("div",{className:"weather__date",children:[t.getHours(),":",t.getMinutes()]}),Object(j.jsx)("div",{className:"weather__description",children:Object(j.jsx)("h5",{children:e.data.description})})]})]})]})},b=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState({value:e.target.value})},a.onSubmit=function(e){e.preventDefault(),a.props.onSubmit(a.state.value)},a.state={value:""},a}return Object(h.a)(n,[{key:"render",value:function(){return console.log(this.props.data.icon),Object(j.jsx)("div",{className:"Location_form",children:Object(j.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(j.jsx)("label",{className:"location-form",children:Object(j.jsx)("input",{type:"text",name:"location",value:this.state.value,onChange:this.handleChange})}),Object(j.jsx)("input",{type:"submit",value:"ok"})]})})}}]),n}(c.a.Component),m=n(10),f=function(){function e(t){Object(l.a)(this,e);var n=t.main,a=n.temp,c=n.feels_like,r=n.temp_min,s=n.temp_max,i=n.pressure,o=n.humidity,h=t.wind,u=t.sys.country,d=t.name,j=t.weather;this.temp=a,this.feels_like=c,this.temp_min=r,this.temp_max=s,this.pressure=i,this.humidity=o,this.wind=h,this.setIcon(j),this.setDescription(j),this.setCity(d),this.setCountry(u),this.setDate(t)}return Object(h.a)(e,[{key:"setDescription",value:function(e){var t=Object(m.a)(e,1)[0];t.description&&(this.description=t.description)}},{key:"setIcon",value:function(e){var t=Object(m.a)(e,1)[0];t.icon&&(this.icon=t.icon)}},{key:"setCity",value:function(e){e&&(this.city=e)}},{key:"setCountry",value:function(e){e&&(this.country=e)}},{key:"setDate",value:function(e){var t=e.dt+(e.timezone?e.timezone:0);this.date=new Date(1e3*t)}}]),e}(),v=n(13),x=function(e){return new f(e)},O=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=0,a=!1;!a;)for(var c=0;c<e.length;c+=1){var r=x(e[c]);t[n]?r.date.getDay()===t[n][t[n].length-1].date.getDay()?t[n].push(r):n++:t.push([r]),c===e.length-1&&(a=!0)}var s=function e(t,n){for(var a in t)t.hasOwnProperty(a)&&("number"===typeof t[a]&&a.indexOf("max")>=0&&t[a]>n[a]||"number"===typeof t[a]&&a.indexOf("min")>=0&&t[a]<n[a]||"number"===typeof t[a]&&t[a]>n[a]||n[a]instanceof Date?n[a]=t[a]:"object"===typeof t[a]&&e(t[a],n[a]))},i=t.reduce((function(e,t){var n,a=t[0],c=Object(v.a)(t);try{for(c.s();!(n=c.n()).done;){var r=n.value;s(r,a)}}catch(i){c.e(i)}finally{c.f()}return e.push(a),e}),[]);return i},g=(n(21),function(e){console.log(e);var t=e.forecast.map((function(e){return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:Object(j.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(e.icon,"@2x.png"),alt:""})}),Object(j.jsxs)("h5",{children:[Object(j.jsx)("br",{})," ",e.temp,"\u2103"]})]}),Object(j.jsx)("div",{children:Object(j.jsxs)("h5",{children:["\u0447\u0443\u0432\u0441\u0442\u0432\u0443\u0435\u0442\u0441\u044f \u043a\u0430\u043a: ",Object(j.jsx)("br",{})," ",e.feels_like,"\u2103"]})}),Object(j.jsx)("div",{children:Object(j.jsxs)("h5",{children:["\u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430: ",Object(j.jsx)("br",{})," ",e.temp_min,"\u2103"]})}),Object(j.jsx)("div",{children:Object(j.jsxs)("h5",{children:["\u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430: ",Object(j.jsx)("br",{})," ",e.temp_max,"\u2103"]})}),Object(j.jsx)("div",{children:Object(j.jsxs)("h5",{children:["\u0434\u0430\u0432\u043b\u0435\u043d\u0438\u0435: ",Object(j.jsx)("br",{})," ",e.pressure]})})]})}));return Object(j.jsx)("div",{className:"week_weather",children:Object(j.jsx)("div",{className:"week_weather_temp",children:t})})}),w="103d2bea1f0fea90b85f7ca4c51dcc4f",y=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={currentDayWeather:void 0,location:"",forecast:[],isLoading:!0,geolocation:{lon:-.118092,lat:51.509865}},e.getCoords=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(t){var n=t.coords,a=n.longitude,c=n.latitude;e.setState({geolocation:{lon:a,lat:c}},(function(){return e.updateWeatherData()}))})):console.log("FUCK OFF"),console.log(e.state.geolocation);case 2:case"end":return t.stop()}}),t)}))),e.getLocationWeather=Object(o.a)(i.a.mark((function t(){var n,a,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="https://api.openweathermap.org/data/2.5/weather?appid=".concat(w,"&lat=").concat(e.state.geolocation.lat,"&lon=").concat(e.state.geolocation.lon,"&units=metric"),t.next=4,fetch(n);case 4:return a=t.sent,t.next=7,a.json();case 7:c=t.sent,e.setState({currentDayWeather:new f(c)}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),e.setState({error:!0});case 15:case"end":return t.stop()}}),t,null,[[0,11]])}))),e.getWeatherByName=Object(o.a)(i.a.mark((function t(){var n,a,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="https://api.openweathermap.org/data/2.5/weather?appid=".concat(w,"&q=").concat(e.state.location,"&units=metric"),t.next=4,fetch(n);case 4:return a=t.sent,t.next=7,a.json();case 7:c=t.sent,e.setState({currentDayWeather:new f(c),location:c.name,gelocation:c.coord}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),e.setState({error:!0});case 15:case"end":return t.stop()}}),t,null,[[0,11]])}))),e.getForecast=Object(o.a)(i.a.mark((function t(){var n,a,c,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="https://api.openweathermap.org/data/2.5/forecast?appid=".concat(w,"&lat=").concat(e.state.geolocation.lat,"&lon=").concat(e.state.geolocation.lon,"&units=metric&cnt=40"),t.next=4,fetch(n);case 4:return a=t.sent,t.next=7,a.json();case 7:c=t.sent,r=O(c.list),e.setState({forecast:r}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0),e.setState({error:!0});case 16:case"end":return t.stop()}}),t,null,[[0,12]])}))),e.search=function(t){e.setState({isLoading:!0}),e.setState({location:t},Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getWeatherByName();case 2:return t.next=4,e.getForecast();case 4:e.setState({isLoading:!1});case 5:case"end":return t.stop()}}),t)}))))},e}return Object(h.a)(n,[{key:"updateWeatherData",value:function(){var e=this;return this.setState({isLoading:!0}),Promise.all([this.getLocationWeather(),this.getForecast()]).then((function(){return e.setState({isLoading:!1})}))}},{key:"componentDidMount",value:function(){this.getCoords()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.error,a=e.currentDayWeather,c=e.location,r=e.forecast;return t?Object(j.jsx)("h2",{children:"LOADING..."}):n?Object(j.jsx)("h2",{children:"Please reload page!"}):Object(j.jsxs)("div",{children:[Object(j.jsx)(p,{data:a,children:Object(j.jsx)(b,{location:c,data:a,onSubmit:this.search})}),Object(j.jsx)(g,{forecast:r})]})}}]),n}(c.a.Component);r.render(Object(j.jsx)(y,{}),document.querySelector("#root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.fc54b014.chunk.js.map